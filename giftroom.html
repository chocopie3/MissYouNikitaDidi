<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Farewell Room â€” For Nikita Didi</title>
  <link rel="stylesheet" href="assets/style.css">
  <style>
    /* subtle emoji background + stacking */
    .bg-emoji {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }
    .bg-emoji .emoji {
      position: absolute;
      will-change: transform, opacity;
      opacity: 0.12;
      transform: translate3d(0,0,0);
      user-select: none;
      filter: drop-shadow(0 6px 12px rgba(0,0,0,0.06));
      transition: transform 10s linear, opacity 2s;
      animation-name: floatSlow;
      animation-iteration-count: infinite;
      animation-timing-function: ease-in-out;
    }
    @keyframes floatSlow {
      0% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-18px) rotate(6deg); }
      100% { transform: translateY(0) rotate(0deg); }
    }
    /* ensure main content appears above decorative background */
    .giftroom, .gr-header, .room, .modal { position: relative; z-index: 2; }

    /* confetti canvas sits above bg but under UI */
    #confettiCanvas2 {
      position: fixed;
      left: 0; top: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 1;
      opacity: 0.85;
    }
    /* gift grid: align gift boxes horizontally and wrap */
    .gift-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 18px;
      justify-content: center;
      align-items: flex-start;
      padding: 8px 12px;
      box-sizing: border-box;
      margin-top: 6px;
    }
    .gift-grid .gift {
      flex: 0 0 220px; /* fixed-ish card width for consistent rows */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }
    @media (max-width: 900px) {
      .gift-grid .gift { flex: 0 0 180px; }
    }
    @media (max-width: 520px) {
      .gift-grid .gift { flex: 0 0 calc(50% - 18px); }
    }
    /* subtly hide secret gift but keep it findable */
    .gift.secret {
      opacity: 0.18;
      transform: scale(0.94) translateY(6px);
      filter: grayscale(0.18) blur(0.2px);
      transition: opacity .28s ease, transform .28s ease, filter .28s ease;
      position: relative;
      pointer-events: auto; /* still clickable */
    }
    /* small "peek" badge to hint at secrecy */
    .gift.secret .peek {
      position: absolute;
      top: 8px;
      right: 8px;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #ffd36f;
      box-shadow: 0 4px 14px rgba(255,211,111,0.18);
      animation: peekPulse 1.6s infinite;
      z-index: 6;
    }
    @keyframes peekPulse {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.35); opacity: 0.75; }
      100% { transform: scale(1); opacity: 1; }
    }
    /* label that sits under the tucked box to hint at surprise */
    .gift.secret::after {
      content: "Hidden Surprise";
      position: absolute;
      bottom: -22px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.78rem;
      color: #fff;
      background: rgba(181,126,220,0.96);
      padding: 4px 8px;
      border-radius: 10px;
      box-shadow: 0 6px 18px rgba(181,126,220,0.12);
      z-index: 5;
      opacity: 0.95;
      pointer-events: none;
    }
    /* reveal fully on hover/focus for discoverability */
    .gift.secret:hover,
    .gift.secret:focus-within {
      opacity: 1;
      transform: scale(1) translateY(0);
      filter: none;
      z-index: 10;
    }
    /* small accessible-only label (screen readers) */
    .sr-only { position:absolute !important; height:1px; width:1px; overflow:hidden; clip:rect(1px,1px,1px,1px); white-space:nowrap; }
  </style>
</head>
<body class="giftroom">
  <!-- decorative emoji layer -->
  <div class="bg-emoji" id="bgEmoji" aria-hidden="true"></div>
  <header class="gr-header">
    <h1>Nikita Didi's Farewell Room ğŸ“ğŸ</h1>
    <div class="header-controls">
      <a href="index.html" class="btn">Back</a>
      <button id="muteBtn" class="btn">Mute</button>
    </div>
  </header>

  <main class="room">
    <p class="intro">WE WILL MISS YOU DIDI!!!! ğŸ“âœ¨ â€” Thank you for everything.</p>

    <div class="room-top">
      <div class="progress">Years together: <span id="maturity">(almost) 3 years (cherished memories)</span>
        <div class="progress-bar"><div id="progressFill" style="width:80%"></div></div>
      </div>
      <div class="emoji-cloud">ğŸ‰ ğŸª© âœ¨</div>
    </div>

    <section class="intro-letter">
      <div class="letter-card">
        <h2>Dear Nikita Didi,</h2>
        <p>As you move on from school, we wanted to gather all our little memories here.<br><br>
        Youâ€™ve been a guiding senior, a friend, and a constant presence â€” we wonâ€™t forget the the million snaps, the laughter , or the way you inspired everyone.<br><br>
        This room is a small token of our gratitude. Go shine in the next chapter â€” and remember, you always have a home with us. Also know that your mom would be proud of who you are ğŸ¥¹â¤ï¸<br>
        â€” With love and best wishes from your vanmates! (This website is best viewed on a desktop browser with â¤ï¸)
       <br><br> P.S. Some glitches still remain... Do not judge, just a small token of love! BTW Adhira Didi helped a lot you shud thank her too.</p>
      </div>
    </section>
    <div class="scroll-cue">â¬‡ï¸ Scroll for ğŸ â¬‡ï¸</div>
      <div class="gift-grid" aria-hidden="false">
        <!-- existing core gifts -->
        <div class="gift giftbox color2" data-gift="wallpapers"><div class="box-lid"></div><div class="box-base"></div><span class="gift-emoji">ğŸ–¼ï¸</span><span class="gift-label"><a href="wallpapers.html" class="btn" id="wallpapersBtn">Cute Phone Wallpapers</a></span></div>
        <div class="gift giftbox color3" data-gift="slideshow"><div class="box-lid"></div><div class="box-base"></div><span class="gift-emoji">ğŸ“¼</span><span class="gift-label"><a href="slideshow.html" class="btn" id="slideshowBtn">Memory Montage</a></span></div>
        <div class="gift giftbox color4" data-gift="quiz"><div class="box-lid"></div><div class="box-base"></div><span class="gift-emoji">ğŸ§ </span><span class="gift-label"><a href="quiz.html" class="btn" id="quizBtn">Random IQ Test</a></span></div>
        <div class="gift giftbox color5" data-gift="candle"><div class="box-lid"></div><div class="box-base"></div><span class="gift-emoji">ğŸ•¯ï¸</span><span class="gift-label"><a href="candle.html" class="btn" id="candleBtn">Remembrance Candle</a></span></div>
        <div class="gift giftbox color7" data-gift="mirror"><div class="box-lid"></div><div class="box-base"></div><span class="gift-emoji">ğŸª</span><span class="gift-label"><a href="mirror.html" class="btn" id="mirrorBtn">Look at YOU!!!! âœ¨</a></span></div>
        <div class="gift giftbox color8" data-gift="fortune"><div class="box-lid"></div><div class="box-base"></div><span class="gift-emoji">ğŸ¥ </span><span class="gift-label"><a href="fortune.html" class="btn" id="fortuneBtn">Farewell Fortunes</a></span></div>
        <div class="gift giftbox color10 secret" data-gift="secret">
          <div class="box-lid"></div>
          <div class="box-base"></div>
          <span class="peek" aria-hidden="true"></span>
          <span class="gift-emoji">ğŸ²</span>
          <span class="gift-label"><a href="secret.html" class="btn" id="secretBtn">Goodbye Surprise</a></span>
          <span class="sr-only">Hidden surprise â€” hover or focus to reveal</span>
        </div>
      </div>
    </section>
  </main>

  <!-- Modals -->
  <div id="modal" class="modal hidden" role="dialog" aria-hidden="true">
    <div class="modal-inner">
      <button id="closeModal" class="close">âœ•</button>
      <div id="modalContent"></div>
    </div>
  </div>

  <canvas id="confettiCanvas2" class="confetti"></canvas>
  <script>
    // decorative emoji injection
    (function(){
      const emojis = ['ğŸˆ','âœ¨','ğŸ’–','ğŸŒ¸','ğŸ‰','ğŸ¦‹','ğŸŒŸ'];
      const container = document.getElementById('bgEmoji');
      const count = 14;
      const w = window.innerWidth;
      const h = window.innerHeight;
      for (let i=0;i<count;i++){
        const el = document.createElement('div');
        el.className = 'emoji';
        el.textContent = emojis[i % emojis.length];
        const size = 22 + Math.round(Math.random()*22);
        el.style.fontSize = size + 'px';
        const left = Math.random()*100;
        const top = Math.random()*100;
        el.style.left = left + 'vw';
        el.style.top = top + 'vh';
        el.style.opacity = (0.06 + Math.random()*0.14).toString();
        el.style.animationDuration = (10 + Math.random()*14) + 's';
        el.style.transform = `translateY(0) rotate(${(Math.random()*20-10)}deg)`;
        container.appendChild(el);
      }
      // reposition on resize (keep simple)
      window.addEventListener('resize', () => {
        const kids = container.children;
        for (let i=0;i<kids.length;i++){
          kids[i].style.left = (5 + Math.random()*90) + 'vw';
          kids[i].style.top = (5 + Math.random()*90) + 'vh';
        }
      });
    })();

    // light confetti effect on confettiCanvas2
    (function(){
      const canvas = document.getElementById('confettiCanvas2');
      const ctx = canvas.getContext('2d');
      let particles = [];
      function resize(){
        const dpr = window.devicePixelRatio || 1;
        canvas.width = Math.floor(window.innerWidth * dpr);
        canvas.height = Math.floor(window.innerHeight * dpr);
        canvas.style.width = window.innerWidth + 'px';
        canvas.style.height = window.innerHeight + 'px';
        ctx.setTransform(dpr,0,0,dpr,0,0);
      }
      function spawn(){
        // slightly larger and more frequent light confetti
        particles.push({
          x: Math.random()*window.innerWidth,
          y: -8,
          r: 4 + Math.random()*5,                // modestly larger
          vy: 0.8 + Math.random()*1.4,           // a touch faster
          vx: (Math.random()-0.5)*0.8,
          rot: Math.random()*360,
          vr: (Math.random()-0.5)*0.12,
          color: `hsl(${Math.random()*60+300}, 78%, ${54 + Math.random()*12}%)`,
          life: 0
        });
      }
      function loop(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        // higher ceiling and spawn chance for a bit more confetti
        if (particles.length < 44 && Math.random() < 0.28) spawn();
        for (let i=particles.length-1;i>=0;i--){
          const p = particles[i];
          p.x += p.vx;
          p.y += p.vy;
          p.vy += 0.015;
          p.rot += p.vr;
          p.life++;
          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          ctx.fillStyle = p.color;
          ctx.globalAlpha = Math.max(0.07, 1 - p.life/220);
          ctx.fillRect(-p.r/2, -p.r/2, p.r, p.r*0.6);
          ctx.restore();
          if (p.y > window.innerHeight + 30 || p.life > 420) particles.splice(i,1);
        }
        requestAnimationFrame(loop);
      }
      window.addEventListener('resize', resize);
      resize();
      loop();
    })();
  </script>
  <script src="assets/script.js"></script>
</body>
</html>
